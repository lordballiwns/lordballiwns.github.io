<!DOCTYPE html>
<html lang="es_mx">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pron칩stico del Tiempo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="neon-div" onclick="copyAccountNumber()">
        춰Ay칰danos con tu donaci칩n! <p> N칰mero de cuenta: 1271 8001 3023 546289
    </div>
    <button onclick="copiarTexto()">游늶</button>
    <p id="copiar">
    <h1>Pron칩stico del Tiempo<p>Ayuntamiento de San Nicol치s</h1>
    <script>
        function copyAccountNumber() {
            const accountNumber = '1271 8001 3023 546289';
            navigator.clipboard.writeText(accountNumber)
                .then(() => alert('N칰mero de cuenta copiado: ' + accountNumber))
                .catch(error => console.error('Error al copiar el n칰mero de cuenta:', error));
        }
    </script>
    <div id="pronostico"></div>
    <script>
  async function obtenerPronostico() {
    try {
      const url = 'https://api.openweathermap.org/data/2.5/forecast?lang=es&lat=16.41&lon=-98.51&appid=c930acc727dc9fd57adb722dd5f93b74&units=metric';
      const respuesta = await fetch(url);
      const datos = await respuesta.json();

      // Extrae los datos para los pr칩ximos 3 d칤as (칤ndices 0, 8 y 16)
      const pronosticoDia1 = datos.list[0];
      const pronosticoDia2 = datos.list[8];
      const pronosticoDia3 = datos.list[16];
    
    // Funci칩n para redondear a dos decimales
      const redondear = (numero) => Math.round(numero * 100) / 100;
    
    // Mapeo de letras a per칤odos del d칤a
                const periodoDia = {
                    d: 'D칤a',
                    t: 'Tarde',
                    n: 'Noche',
                    };

      // Datos espec칤ficos para cada d칤a
      const datosDia1 = {
        fecha: 
        pronosticoDia1.dt_txt,
        temperatura: pronosticoDia1.main.temp,
        sensacionTermica: pronosticoDia1.main.feels_like,
        humedad: pronosticoDia1.main.humidity,
        nubosidad: pronosticoDia1.clouds.all,
        descripcion: pronosticoDia1.weather[0].description, 
        probabilidadLluvias: redondear(pronosticoDia1.pop * 100), 
        // Multiplicamos por 100 y redondeamos
        
        velocidadViento: pronosticoDia1.wind.speed,
        direccionViento: pronosticoDia1.wind.deg,
        rachasViento: pronosticoDia1.wind.gust,
        visibilidad: pronosticoDia1.visibility / 1000,
        rain3h: pronosticoDia1.rain ? pronosticoDia1.rain['3h'] : 0, // Agregamos rain.3h
        sysPod: periodoDia[pronosticoDia1.sys.pod], // Agregamos sys.pod
        poblacion: datos.city.population, // Agregamos city.population
      };

      const datosDia2 = {
        fecha: 
        pronosticoDia2.dt_txt,
        temperatura: pronosticoDia2.main.temp,
        sensacionTermica: pronosticoDia2.main.feels_like,
        humedad: pronosticoDia2.main.humidity,
        nubosidad: pronosticoDia2.clouds.all,
        descripcion: pronosticoDia2.weather[0].description,
        probabilidadLluvias: redondear(pronosticoDia2.pop * 100),
        velocidadViento: pronosticoDia2.wind.speed,
        direccionViento: pronosticoDia2.wind.deg,
        rachasViento: pronosticoDia2.wind.gust,
        visibilidad: pronosticoDia2.visibility / 1000,
      };

      const datosDia3 = {
        fecha: 
        pronosticoDia3.dt_txt,
        temperatura: pronosticoDia3.main.temp,
        sensacionTermica: pronosticoDia3.main.feels_like,
        humedad: pronosticoDia3.main.humidity,
        nubosidad: pronosticoDia3.clouds.all,
        descripcion: pronosticoDia3.weather[0].description,
        probabilidadLluvias: redondear(pronosticoDia3.pop * 100),
        velocidadViento: pronosticoDia3.wind.speed,
        direccionViento: pronosticoDia3.wind.deg,
        rachasViento: pronosticoDia3.wind.gust,
        visibilidad: pronosticoDia3.visibility / 1000,
      };

      // Actualiza el contenido del elemento con ID "pronostico"
      document.getElementById('pronostico').innerHTML = `
        <h3>Hoy:</h3>
        <p>Fecha: ${datosDia1.fecha}</p>
        <p>Temperatura: ${datosDia1.temperatura} 춿C</p>
        <p>Sensaci칩n t칠rmica: ${datosDia1.sensacionTermica} 춿C</p>
        <p>Humedad: ${datosDia1.humedad}%</p>
        <p>Nubosidad: ${datosDia1.nubosidad}%</p>
        <p>Descripci칩n: ${datosDia1.descripcion}</p> 
        <p>Precipitaci칩n: ${datosDia1.probabilidadLluvias}%</p>
        <p>Lluvia en las 칰ltimas 3 horas: ${datosDia1.rain3h} mm</p>
        <p>Per칤odo del d칤a: ${datosDia1.sysPod}</p>
        <p>Poblaci칩n: ${datosDia1.poblacion}</p>
        <p>Visibilidad: ${datosDia1.visibilidad} Kil칩metros</p>
        <!-- Agrega m치s detalles seg칰n tus necesidades -->
        <h3>Ma침ana:</h3>
        <p>Fecha: ${datosDia2.fecha}</p>
        <p>Temperatura: ${datosDia2.temperatura} 춿C</p>
        <p>Sensaci칩n t칠rmica: ${datosDia2.sensacionTermica} 춿C</p>
        <p>Humedad: ${datosDia2.humedad}%</p>
        <p>Nubosidad: ${datosDia2.nubosidad}%</p>
        <p>Descripci칩n: ${datosDia2.descripcion}</p>
        <p>Precipitaci칩n: ${datosDia2.probabilidadLluvias}%</p>
        <p>Visibilidad: ${datosDia2.visibilidad} Kil칩metros</p>
        <!-- Agrega m치s detalles seg칰n tus necesidades -->
        <h3>Pasado:</h3>
        <p>Fecha: ${datosDia3.fecha}</p>
        <p>Temperatura: ${datosDia3.temperatura} 춿C</p>
        <p>Sensaci칩n t칠rmica: ${datosDia3.sensacionTermica} 춿C</p>
        <p>Humedad: ${datosDia3.humedad}%</p>
        <p>Nubosidad: ${datosDia3.nubosidad}%</p>
        <p>Descripci칩n: ${datosDia3.descripcion}</p>
        <p>Precipitaci칩n: ${datosDia3.probabilidadLluvias}%</p>
        <p>Visibilidad: ${datosDia3.visibilidad} Kil칩metros</p>
        <!-- Agrega m치s detalles seg칰n tus necesidades -->
      `;
    } catch (error) {
      console.error('Error al obtener pron칩stico:', error);
    }
  }

  // Llama a la funci칩n para obtener el pron칩stico al cargar la p치gina
  obtenerPronostico();
</script>
    <marquee behavior="scroll" direction="left" scrollamount="2" loop="infinite">
        &copy; Proyecto Tigger Swan | Versi칩n  5.0 PR1 | Todos los derechos reservados por Lord Balliwn's | Tema: Blue
        | <span id="fecha"></span>
    </marquee>

    <!-- Script para mostrar la fecha actual -->
    <script>
        const fechaActual = new Date();
        const mes = fechaActual.toLocaleString('es', { month: 'long' });
        const mesConPrimeraMayuscula = mes.charAt(0).toUpperCase() + mes.slice(1);
        const a침o = fechaActual.getFullYear();
        document.getElementById('fecha').textContent = `${mesConPrimeraMayuscula} ${a침o}`;
    </script>
    </p>
    <script>
        function copiarTexto() {
            const textoACopiar = document.getElementById("copiar").textContent;
            navigator.clipboard.writeText(textoACopiar)
                .then(() => {
                    alert("Texto copiado al portapapeles: " + textoACopiar);
                })
                .catch((error) => {
                    console.error("Error al copiar el texto: " + error);
                });
        }
    </script>
</body>
</html>